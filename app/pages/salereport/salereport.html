<!--
  Generated template for the SalereportPage page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

    <ion-navbar>
        <button menuToggle>
         <ion-icon name="menu"></ion-icon>
            </button>
        <ion-title>Sale Report</ion-title>
        <!--<ion-buttons end class="button-right">
            <button royal class="btn-refresh">
        <ion-icon name="refresh"></ion-icon>
      </button>
        </ion-buttons>-->
    </ion-navbar>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</ion-header>

<ion-content padding>
    <ion-refresher (ionRefresh)="doRefresh($event)">
        <ion-refresher-content></ion-refresher-content>
    </ion-refresher>
    <ion-list>
        <ion-item>
            <ion-label>Search</ion-label>
            <ion-select [(ngModel)]="searchCondition" (ionChange)="searchAll()">
                <ion-option value=''>ALL</ion-option>
                <ion-option value='REGION'>REGION</ion-option>
                <ion-option value='BRANCH'>BRANCH</ion-option>
            </ion-select>
        </ion-item>
        <ion-item>
            <ion-label>{{searchCondition}}</ion-label>
            <ion-select [(ngModel)]="searchValue" [disabled]="(searchCondition == undefined || searchCondition == '' )? true : false " (ionChange)="searchBranch() ">
                <template [ngIf]="!(searchCondition == undefined || searchCondition == '' ) ">
                    <template [ngIf]="searchCondition == 'BRANCH' ">
                        <ion-option *ngFor="let item of listBranch ">{{item}}</ion-option>
                    </template>
                <template [ngIf]="searchCondition=='REGION' ">
                        <ion-option *ngFor="let item of listRegion ">{{item}}</ion-option>
                    </template>
                </template>
            </ion-select>
        </ion-item>
    </ion-list>
    <div class="div-reponsive ">
        <div class="reponsive-sm ">
            <table class="table-sales table table-bordered table-hover ">
                <thead>
                    <tr>
                        <th class="col textCenter lg ">Branch</th>
                        <th class="col textCenter">No of SA</th>
                        <th class="col textCenter col-sum">HOB/AHOB/Office Admin</th>

                        <th class="col textCenter ">Carry Forward (A)</th>
                        <th class="col textCenter ">Booking Target</th>
                        <th class="col textCenter ">Booking Collect (B)</th>
                        <th class="col textCenter ">TOTAL Booking (A+B)</th>
                        <th class="col textCenter ">Cancel</th>
                        <th class="col textCenter ">Target FI</th>
                        <th class="col textCenter ">Final FI</th>
                        <th class="col textCenter ">%</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of listResults ">
                        <template [ngIf]="isTotal(item.HOB.name) ">
                            <td class="col textCenter row-total "><span>{{item.branch}}</span></td>                             
                            <td class="col textCenter row-total "><span>{{item.noOfSA}}</span></td>
                            <td class="col textCenter row-total"></td>                           
                            <td class="col textRight row-total "><span>{{item.carryForward}}</span></td>
                            <td class="col textRight row-total "><span>{{item.bookingTarget}}</span></td>
                            <td class="col textRight row-total "><span>{{item.bookingCollect}}</span></td>
                            <td class="col textRight row-total "><span>{{item.bookingTotal}}</span></td>
                            <td class="col textRight row-total "><span>{{item.cancelNo}}</span></td>
                            <td class="col textRight row-total "><span>{{item.targetFI}}</span></td>
                            <td class="col textRight row-total "><span>{{item.finalFI}}</span></td>
                            <td class="col textRight row-total ">
                                <div class="progress">
                                 <div class="progress-bar progress-bar-success"  role="progressbar" [ngStyle]="{width:item.percent}"  attr.aria-valuenow="{{item.percent| slice:0:item.percent.length -1}}" aria-valuemin="0" aria-valuemax="100">
                                 {{item.percent}}</div>
                                </div>
                            </td>
                        </template>
                        <template [ngIf]="!isTotal(item.HOB.name) ">
                            <td class="col textCenter "><span>{{item.branch}}</span></td>
                            <td class="col textCenter "><span>{{item.noOfSA}}</span></td>
                             <td class="col textCenter box-info-sum">
                                  <ul class="media-list list-inline">
                                     <li> 
                                         <div class="box-img-smallcircle">
                                                 <a href="#" (click)="showInfo(item.HOB)">
                                                     <img class="media-object img-circle img-responsive" src="./img/{{item.HOB.image}}">
                                                </a>                                              
                                         </div>
                                         </li>
                                          <li>
                                              <div class="box-img-smallcircle">                                               
                                                <a href="#" (click)="showInfo(item.AHOB)">
                                                     <img class="media-object img-circle img-responsive" src="./img/{{item.AHOB.image}}">
                                                </a>
                                        </div>
                                         </li>
                                          <li>
                                              <div class="box-img-smallcircle">                                               
                                                <a href="#" (click)="showInfo(item.AHOB)">
                                                     <img class="media-object img-circle img-responsive" src="./img/default_avatar.png">
                                                </a>
                                        </div>
                                         </li>
                                       <!--  <div class="media-body">
                                             <div class="head-info">
                                            <h1 class="name-HOB"><a href="#" (click)="showInfo(item.HOB)">{{item.HOB.name}}</a></h1>   
                                             <h4 class="name-AHOB"><a href="#" (click)="showInfo(item.AHOB)">{{item.AHOB.name}}</a></h4>   
                                             <h3 class="name-officeAdmin"><a href="#">{{item.officeAdmin}}</a></h3> 
                                             </div>
                                        </div>-->
                                    
                                </ul>
                            </td>                           
                         
                            <td class="col textRight "><span>{{item.carryForward}}</span></td>
                            <td class="col textRight "><span>{{item.bookingTarget}}</span></td>
                            <td class="col textRight "><span>{{item.bookingCollect}}</span></td>
                            <td class="col textRight "><span>{{item.bookingTotal}}</span></td>
                            <td class="col textRight "><span>{{item.cancelNo}}</span></td>
                            <td class="col textRight "><span>{{item.targetFI}}</span></td>
                            <td class="col textRight "><span>{{item.finalFI}}</span></td>
                            <td class="col textRight ">
                                <div class="progress">
                                 <div class="progress-bar progress-bar-info"  role="progressbar"  [ngStyle]="{width:item.percent}"  attr.aria-valuenow="{{item.percent| slice:0:item.percent.length -1}}" aria-valuemin="0" aria-valuemax="100">
                                 {{item.percent}}</div>
                                </div>
                                </td>
                        </template>

                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</ion-content>