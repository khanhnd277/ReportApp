<!--
  Generated template for the SalereportPage page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

    <ion-navbar>
        <button menuToggle>
         <ion-icon name="menu"></ion-icon>
            </button>
        <ion-title>Sale Report</ion-title>
        <!--<ion-buttons end class="button-right">
            <button royal class="btn-refresh">
        <ion-icon name="refresh"></ion-icon>
      </button>
        </ion-buttons>-->
    </ion-navbar>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</ion-header>

<ion-content padding>
    <ion-refresher (ionRefresh)="doRefresh($event)">
        <ion-refresher-content></ion-refresher-content>
    </ion-refresher>
    <!--<ion-list>
        <ion-item>
            <ion-label>Search</ion-label>
            <ion-select [(ngModel)]="searchCondition" (ionChange)="searchAll()">
                <ion-option value=''>ALL</ion-option>
                <ion-option value='REGION'>REGION</ion-option>
                <ion-option value='BRANCH'>BRANCH</ion-option>
            </ion-select>
        </ion-item>
        <ion-item>
            <ion-label>{{searchCondition}}</ion-label>
            <ion-select [(ngModel)]="searchValue" [disabled]="(searchCondition == undefined || searchCondition == '' )? true : false " (ionChange)="searchBranch() ">
                <template [ngIf]="!(searchCondition == undefined || searchCondition == '' ) ">
                    <template [ngIf]="searchCondition == 'BRANCH' ">
                        <ion-option *ngFor="let item of listBranch ">{{item}}</ion-option>
                    </template>
                <template [ngIf]="searchCondition=='REGION' ">
                        <ion-option *ngFor="let item of listRegion ">{{item}}</ion-option>
                    </template>
                </template>
            </ion-select>
        </ion-item>
    </ion-list>-->
    <div class="list-select-date">
        <ion-item>
            <ion-label>Period</ion-label>
            <ion-datetime displayFormat="MMMM YYYY" pickerFormat="MMMM YYYY"></ion-datetime>
        </ion-item>
    </div>
    <div class="div-reponsive ">
        <div class="reponsive-sm ">
            <table class="table-sales table table-bordered table-hover ">
                <thead>
                    <tr>
                        <th class="col textCenter lg ">Branch /<br> No of SA</th>
                        <th class="col textCenter col-sum">HOB / AHOB /<br>Office Admin</th>
                        <th class="col textCenter ">Carry Forward (A)</th>
                        <th class="col textCenter ">Booking Target</th>
                        <th class="col textCenter ">Booking Collect (B)</th>
                        <th class="col textCenter ">TOTAL Booking (A+B)</th>
                        <th class="col textCenter ">Cancel</th>
                        <th class="col textCenter ">Target FI</th>
                        <th class="col textCenter ">Final FI</th>
                        <th class="col textCenter ">%</th>
                    </tr>
                </thead>
                <tbody>
                    <template ngFor let-item [ngForOf]="listResults" let-i="index">
                    <!--<tr *ngFor="let item of listResults" data-toggle="collapse" data-target="#demo1" class="accordion-toggle">-->
                        
                        <template [ngIf]="isTotal(item.HOB.name) ">
                            <tr data-toggle="collapse" class="clickable" attr.data-target=".{{item.branch}}">
                            <td class="col textCenter row-total "><p><span>{{item.branch}}</span><br><span class="badge badge-info">{{item.noOfSA}}</span></p></td>                            
                            <td class="col textCenter row-total "><p><span>GRAND TOTAL</span></p></td>                           
                            <td class="col textRight row-total "><p><span>{{item.carryForward}}</span></p></td>
                            <td class="col textRight row-total "><p><span>{{item.bookingTarget}}</span></p></td>
                            <td class="col textRight row-total "><p><span>{{item.bookingCollect}}</span></p></td>
                            <td class="col textRight row-total "><p><span>{{item.bookingTotal}}</span></p></td>
                            <td class="col textRight row-total "><p><span class="badge badge-danger">{{item.cancelNo}}</span></p></td>
                            <td class="col textRight row-total "><p><span>{{item.targetFI}}</span></p></td>
                            <td class="col textRight row-total "><p><span>{{item.finalFI}}</span></p></td>
                            <td class="col textCenter row-total ">
                                <!-- <div class="progress">
                               <div class="progress-bar progress-bar-success"  role="progressbar" [ngStyle]="{width:item.percent}"  attr.aria-valuenow="{{item.percent| slice:0:item.percent.length -1}}" aria-valuemin="0" aria-valuemax="100">
                                 {{item.percent}}</div>
                                </div>-->
                                <div class="box-percent">
                                     <template [ngIf]="(item.percent| slice:0:item.percent.length -1) < 30">
                                <div class="c100 p{{item.percent| slice:0:item.percent.length -1}} rose small">
                                    <span>{{item.percent}}</span>
                    <div class="slice">
                        <div class="bar"></div>
                        <div class="fill"></div>
                    </div>
                    </div>
                            </template>
                    <template [ngIf]="(item.percent| slice:0:item.percent.length -1) >= 30 && (item.percent| slice:0:item.percent.length -1) < 80">
                                <div class="c100 p{{item.percent| slice:0:item.percent.length -1}} orange small">
                                    <span>{{item.percent}}</span>
                    <div class="slice">
                        <div class="bar"></div>
                        <div class="fill"></div>
                    </div>
                    </div>
                            </template>
                    <template [ngIf]="(item.percent| slice:0:item.percent.length -1) >= 80">
                                <div class="c100 p{{item.percent| slice:0:item.percent.length -1}} green small">
                                    <span>{{item.percent}}</span>
                    <div class="slice">
                        <div class="bar"></div>
                        <div class="fill"></div>
                    </div>
                    </div>
                            </template>
        </div>
        </td>
        </tr>
        </template>
        <template [ngIf]="!isTotal(item.HOB.name) ">   
                    <tr class="{{item.region}} collapse {{(searchCondition == 'BRANCH' && searchValue != '')?'in':''}}" >       
                    <td class="col textCenter ">
                        <p><span>{{item.branch}}</span><br><span class="badge badge-info">{{item.noOfSA}}</span></p>
                    </td>

                    <td class="col textCenter box-info-sum">
                        <ul class="media-list list-inline">
                            <li>
                                <div class="box-img-smallcircle box-HOB">
                                    <a href="#" (click)="showInfo(item.HOB)">
                                        <img class="media-object img-circle img-responsive" src="./img/{{item.HOB.image}}">
                                    </a>
                                </div>
                            </li>
                            <li>
                                <div class="box-img-smallcircle box-AHOB">
                                    <a href="#" (click)="showInfo(item.AHOB)">
                                        <img class="media-object img-circle img-responsive" src="./img/{{item.AHOB.image}}">
                                    </a>
                                </div>
                            </li>
                            <li>
                                <div class="box-img-smallcircle box-OfficeAdmin ">
                                    <a href="#" (click)="showInfo(item.officeAdmin)">
                                        <img class="media-object img-circle img-responsive" src="./img/{{item.officeAdmin.image}}">
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </td>

                    <td class="col textRight ">
                        <p><span>{{item.carryForward}}</span></p>
                    </td>
                    <td class="col textRight ">
                        <p><span>{{item.bookingTarget}}</span></p>
                    </td>
                    <td class="col textRight ">
                        <p><span>{{item.bookingCollect}}</span></p>
                    </td>
                    <td class="col textRight ">
                        <p><span>{{item.bookingTotal}}</span></p>
                    </td>
                    <td class="col textRight ">
                        <p><span class="badge badge-danger">{{item.cancelNo}}</span></p>
                    </td>
                    <td class="col textRight ">
                        <p><span>{{item.targetFI}}</span></p>
                    </td>
                    <td class="col textRight ">
                        <p><span>{{item.finalFI}}</span></p>
                    </td>
                    <td class="col textCenter ">
                        <!--<div class="progress">
                                <div class="progress-bar progress-bar-info"  role="progressbar"  [ngStyle]="{width:item.percent}"  attr.aria-valuenow="{{item.percent| slice:0:item.percent.length -1}}" aria-valuemin="0" aria-valuemax="100">
                                 {{item.percent}}</div>
                                </div>-->
                        <div class="box-percent">
                            <template [ngIf]="(item.percent| slice:0:item.percent.length -1) < 30">
                                <div class="c100 p{{item.percent| slice:0:item.percent.length -1}} rose small">
                                    <span>{{item.percent}}</span>
                    <div class="slice">
                        <div class="bar"></div>
                        <div class="fill"></div>
                    </div>
                    </div>
                            </template>
        <template [ngIf]="(item.percent| slice:0:item.percent.length -1) >= 30 && (item.percent| slice:0:item.percent.length -1) < 80">
                                <div class="c100 p{{item.percent| slice:0:item.percent.length -1}} orange small">
                                    <span>{{item.percent}}</span>
                    <div class="slice">
                        <div class="bar"></div>
                        <div class="fill"></div>
                    </div>
                    </div>
                            </template>
        <template [ngIf]="(item.percent| slice:0:item.percent.length -1) >= 80">
                                <div class="c100 p{{item.percent| slice:0:item.percent.length -1}} green small">
                                    <span>{{item.percent}}</span>
                    <div class="slice">
                        <div class="bar"></div>
                        <div class="fill"></div>
                    </div>
                    </div>
                            </template>



    </div>
    </td>
    </tr>
    </template>
    </template>
    </tbody>
    </table>
    </div>
    </div>



</ion-content>